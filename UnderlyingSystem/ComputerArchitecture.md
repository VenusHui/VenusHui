> CopyRight: VenusHui
>  
> time: 2022.02.23
>
> last edit: 2022.02.23
>  
> Reference: 《计算机系统结构》（第三版）

## 计算机系统结构(Computer Architecture)

* 成绩构成

  + 平时成绩：15%
    - 出勤率：40%
    - 作业：30%
    - 模拟实验：30%

  + 在线学习成绩：25%
    - 平时成绩：40%（完成学习，并且3月21日前在互动问答栏目中提出5个问题，回答5个问题，灌水扣分）
    - 章测试成绩：30%
    - 期末考试成绩：30%

  + 研究性学习：20%
    - 学习报告：50%
    - 答辩及PPT： 50%

  + 线下期末考试成绩：40%

### 第一章：计算机系统结构的基本概念

#### 1.2 计算机系统的层次结构

* L1：微程序机器/硬连电路 -> L2：机器语言（传统机器） -> L3：操作系统虚拟机 -> L4：汇编语言虚拟机 -> L5：高级语言虚拟机 -> L6：应用语言虚拟机
  
  + L1 ~ L3：解释方式实现；L4 ~ L6：翻译方式实现。一般来说解释执行比编译后再执行所花的时间更多，但占用的存储空间更少。

* 计算机系统结构的定义：

  + 传统定义：程序员所看到的计算机的属性，即概念性结构、功能特性，按照计算机系统的多级层次结构，不同级程序员所看到的计算机具有不同的属性。

  + 广义定义：指令集结构(Instruction Set Aarchitecture) + 计算机组织 + 硬件

* 系统结构的重大转折：从单纯依靠指令级并行（流水线），转向开发线程及并行（超线程(Hyper-Treading)、多核：物理+逻辑）和数据级并行（并行计算、单指令多数据流SIMD、多指令多数据流MIMD）

* 计算机组成和计算机实现
  + 计算机组成：逻辑实现
  + 计算机实现：物理实现

* 计算机系统结构的分类

  + 冯氏分类：用系统的最大并行度对计算机进行分类。
    - 最大并行度：计算机在单位时间内能够处理的最大二进制位数：字宽 * 字数

  + Flynn分类：按照指令流和数据流的多倍性进行分类
    - 指令流(Instruction Stream)：计算机执行的指令序列
    - 数据流(Data Straem)：指令流调用的数据序列
    - 多倍性(Multiplicity)：在系统受限的部件上，同时处于同一执行阶段指令或数据的最大数目

  + Handler分类：

#### 定量分析技术

* 计算机系统设计的定量原理

  + 以经常性事件为重点
  + Amdahl定律：加快某部件执行速度所能获得的系统性能加速比受限于该部件的执行时间占总时间的百分比。一种性能改进的递减规则
    - 加速比($S_n$) = 改进后系统性能/改进前系统性能 = 改进前系统时间/改进后系统时间
    - 可改进比例($F_e$)：在改进前的系统中，可改进部分的执行时间在总的执行时间内的比值，总是小于等于1
    - 部件加速比($S_e$)：改进部分性能提高的倍数，总是大于等于1

  + CPU性能公式
    - 时钟周期时间：取决于硬件实现技术与计算机组成
    - CPI(Cycles Per Instruction)：每条指令的平均时钟周期数，取决于计算机组成、计算机实现技术与指令集结构
    - IC(Instruction Count)：指令条数，取决于指令集结构和编译技术
    - $CPU时间 = IC \times CPI \times 时钟周期时间$

  + 程序的局部性原理(principle of locality)
    - 程序执行时所访问的存储器地址分布时相对簇聚的
    - 时间局部性：程序即将用到的信息可能就是程序正在使用的信息（90% -> 10%）
    - 空间局部性：程序即将用到的信息可能与程序正在使用的信息在空间上相近
    - 存储层次的理论基础

  + 软硬件功能分配
    - 软件和硬件在实现功能上是等价的，取舍

* 计算机系统的性能评测
  + 执行时间(execution time)和吞吐率(throughput)
    - CPU时间：用户CPU时间、系统CPU时间
    - 周转时间：从任务交给操作系统，到任务执行完成所用的总时间
  + 基准测试程序(benchmark)
    - 核心测试程序：从真实程序中选出的关键代码段构成
    - 小测试程序
    - 合成的测试程序：按照各种操作的比例编造合成的测试程序，如Whestone，Dhrystone
    - 套装测试程序：SPEC系列
    - 基本要求：采用相同编译器、对同一种语言的程序采用相同的一组标志
  + 性能比较
    - 加权执行时间

* 计算机系统设计的主要方法
  + 自顶向下：从需求出发
  + 自底向上：从硬件出发
  + 从中间：解决软硬件割裂的问题

#### 计算机系统结构的发展

* 冯·诺依曼(Van Neumann)结构
  + 早期：以运算器为中心
  + 后期：以存储器为中心

* 对系统结构进行的改进
  + [I/O方式的改进](../OperatingSystems/TJU-OS.md/.#14-计算机系统组织)
    - I/O处理机：DMA的智能化程度还不够高（无法在DMA上自定义一些程序）、通道方式和外围处理机方式。

  + 采用并行处理技术
    - 指令级并行：流水线技术、多核处理器
    - 线程级并行
    - 进程级并行
    - 任务级并行

  + 存储器组织结构的发展
    - 相联存储器(CMA)、相联处理机
    - 通用寄存器组
    - 高速缓冲存储器

  + 指令集的发展
    - CISC
    - RISC

* 软件对系统结构的影响
