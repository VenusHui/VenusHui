# 数据库

> 2023 春季招聘 / 2024 暑期实习
>
> Reference: [数据库知识手册](https://leetcode.cn/leetbook/detail/database-handbook/)

## 数据库基础概念

### 什么是数据库

- 关系型数据库
  - 建立在关系模型基础上，由多张能够相互连接的表组成的数据库
  - 优点
    - 使用表结构，格式一致易于维护
  - 缺点
    - 读写性能较差
    - 关系模型会造成空间浪费
    - 固定的表结构，不够灵活
- 非关系型数据库
  - 数据以对象的形式存储在数据库中，对象之间的关系通过每个对象自身的属性来决定
  - 优点
    - 存储数据的格式灵活
    - 可以轻松进行海量数据的维护和处理
    - 具有可扩展、高并发、高稳定性、成本低等优势
    - 实现数据的分布式处理
  - 缺点
    - 不支持 `SQL, Structured Query Language`  
    - 无事务处理，无法保证数据的完整性和安全性

### 数据库范式

- 第一范式

  每个列都不可以再拆分，强调的是列的原子性，第一范式要求数据库中的表都是二维表

- 第二范式

  在第一范式的基础上，一个表必须有一个主键，非主键列完全依赖于主键，而不能依赖于主键的一部分

- 第三范式

  在第二范式的基础上，非主键列只直接依赖于主键，不依赖于其他非主键

### 触发器

触发器 `trigger` 是与表相关的数据库对象

## 事务

## 数据库优化

### 数据库结构优化

- 将字段很多的表分解成多个表
- 增加中间表
- 增加冗余字段

### 分库分表

#### 垂直切分

- 优点
  - 行数据变小，查询时减少读取的 `Block` 数
  - 减少 I/O 次数
  - 简化表结构、易于维护
- 缺点
  - 主键冗余，需要管理冗余列
  - 会引起 `JOIN` 操作
  - 加大事务的管理难度

#### 水平切分

- 优点
  - 支持非常大的数据量存储
  - 应用端改造少





















