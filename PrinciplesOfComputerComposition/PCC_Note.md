> writer: VenusHui
> 
> time: 2021.09.08
> 
> last edit: 2021.09.08
>
> Reference: 《计算机组成原理》

# 计算机组成原理

## 第一章 计算机系统概述

### 计算机系统 = 硬件 + 软件。
    软硬件的分界已经不明显

### 计算机系统的硬件组成
    主机系统 + I/O系统
    (CPU + 存储器) + (I/O设备)
    ((控制器 + 运算器) + 存储器) + (输入设备 + 输出设备)
- 冯·诺依曼结构
  - 存储程序原理：在计算机解题之前，要事先编制好程序，并与所需要的数据一起预先存入主存当中。

- 哈佛结构（现代常用）
  - 将程序与数据存储在两个不同的存储空间中，具有数据段和代码段两个通道。
  - 优势：在进行数据交互时，通常指进行数据段交互而代码段不变，提高数据交互效率。

- 运算部件
  - 组成：运算器 + 通用寄存器组(GPR)。运算器即算术逻辑单元(ALU)。

- 内存
  - 存储器 = 内存 + 外存。内存通常利用半导体技术实现，外存通常利用磁记录实现，如磁盘。
  - 内存：一个由大量存储空间构成的能按地址访问的一维线性空间。以字节编址或以字编址，字长与机器有关。

- 控制器
  - 指令寄存器：存放当前正在进行的指令
  - 程序计数器：存放当前正在进行的指令地址
  - 指令译码器：对指令进行译码，形成相应的控制信号
  - 时钟脉冲：
  - 时序信号发生器：
  - 微操作控制部件：微操作指硬件电路中不可再细分的简单操作

### 计算机的软件系统

### 计算机的性能指标

- 基本性能指标
  - 主频：
    - 时钟产生固定频率的时钟脉冲，这个时钟的频率即为主频。通常用一秒钟发出的电子脉冲数来表示。
    - 结构差距很大的机器之间通常不比较主频。
  - 运算速度：通常以每秒执行多少条指令或完成多少次浮点运算表示。
  - 基本字长：
    - 参与运算的数据字的二进制位数，决定了运算精度。
    - 决定了寄存器、ALU、数据总线等的位数，直接影响硬件的造价。
  - 主存容量
  - 主存存取周期：对主存连续访问两次所允许的最小时间间隔。

## 第二章 数制与编码

### 进位计数制与数制转换

- 小数转换在最后补0。

### 带符号数的表示方法

- 原码

- 补码

- 移码：在浮点数据表示中，常使用移码表示阶码。
  - 移码与补码数值部分相同，符号位相反。
  - 目的：能够直接从机器数的形式上直接判断两数真值的大小

### 数的定点表示与浮点表示

### 常用的其他编码

- 十进制数的二进制编码
  - 8421(BCD)码
  - 余3码
  - 2421码

- 字符代码
  - 五单位字符代码
  - 七单位字符代码

- 可靠性编码
  - 格雷(Gray)码
  - 奇偶校验码
  - 海明检验码
  - 循环冗余校验码

## 第六章 计算机执行程序的过程

### 指令

- 立即数：通常是指在立即寻址方式指令中给出的数。可以是8位、16位或32位，该数值紧跟在操作码之后。

- 寻址方式：
  - 直接寻址：
  - 间接寻址：

- `Load R1, 200(R0)`装载寄存器指令（来自存储器的某单元）
  - 计算访存地址：`R0 + 200`
  - 从存储器读出数据送入`R1`

- `Load R1, #1`装载寄存器指令（`#`代表来自立即数）
  - 直接将`IR`中的操作数送入`R1`。

- `ADD R3, R1, R2`加法指令
  - 将`R1`和`R2`的内容送到`ALU`，运算结果送到`R3`。

- `Store R1 200(R2)`存储指令（直接寻址）
  - 计算访存地址放入`R2 + 200 -> AR`
  - 将`R3`中的数据送入`DR`
  - 将`DR`中的数据写入地址为`[AR]`的内存中去。

- `Store R1 @(200)`存储指令（`@`表示间接寻址）
  - 访问存储器，将`MEM[200]`的内容放入`DR`。
  - 将`DR`中的内容放入`AR`（间接寻址的过程）。
  - 将`R1`中的数据送入`DR`。
  - 将`DR`中的数据写入地址为`[AR]`的内存中去。

### 指令的执行过程
- 取址
  - `[PC]->AR`：将程序计数器`PC`的内容传送到内存的地址寄存器`AR`。
  - 从存储器读出第一条指令，放到数据寄存器`DR`当中。
  - 把该指令从`DR`送到指令寄存器`IR`之中。

- 译码
  - 指令寄存器进行[译码]()。

- [指令执行](#指令)

- `PC`中的地址递增，指向下一条指令。

## 第七章 指令系统

### 指令格式

- 每条指令需要包含：
  - 要执行的操作
  - 操作数的来源
  - 操作结果的取向

- 指令的地址码`A`
  - 零地址指令：`OP`
    - 空操作或停机操作。
    - 指令中需要的操作数是隐含指定的，如堆栈操作。
  - 一地址指令：`OP` `A`
    - 只需要一个操作数：`A <- OP[A]`
    - 需要两个操作数：指令中指明一个操作数，另一个操作数载默认的累加器`AC`中，操作结果存放到累加器`AC`中，即`AC <- [AC]OP[A]`
  - 二地址指令：`OP` `A1` `A2`
    - `A1 <- [A1]OP[A2]`
  - 三地址指令：`OP` `A3` `A1` `A2`
    - `A3 <- [A1]OP[A2]`

- 指令的操作码
  - 固定长度操作码
  - 可变长度操作码
  - 扩展操作技术
    - **等长扩展**：操作码分别为4、8、12···位
    - 不等长扩展

- 指令长度
  - 一般来说指令长度即为机器字长（单字长指令）
  - 同时也存在半字长指令，双字长指令。

### 数据类型

- 数据表示和数据结构
  - 数据表示是指计算机硬件能够直接识别、指令系统可以直接调用的数据类型，一般有定点数（整数）、布尔数、浮点数、字符和字符串等。
  - 数据结构是指由软件进行处理和实现各种数据类型，研究逻辑结构与物理结构之间的关系并给出相应算法。
  
- 表示操作数类型的方法
  - 由指令中的操作码确定操作数的类型
    - 对于同一种运算，对于不同的操作数类型有不同的操作码，如整数加，浮点加，无符号数加法等。
    - 绝大多数机器采用这种方法。

  - 给数据加上标识符，由数据本身给出操作数类型。
    - 可以简化机器的指令系统，由硬件自动实现一致性检查和类型转换，简化编译器。
    - 需要在程序执行过程中动态检测标识符，动态开销过大。
